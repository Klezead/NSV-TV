var twitchChannelName=null,twitchChannel=null,twitchStream=null;$(document).ready(function(){"use strict";$.setChannelInfo=function(){$("#twitchChannelName").html(twitchChannelName),$("#twitchChannelName").attr("href",config.twitch.url.channel.replace("<channelName>",twitchChannelName)),$("#twitchChannelName").attr("title",config.twitch.url.channelLinkTitle.replace("<channelName>",twitchChannelName)),$("#twitchChannel").attr("src",config.twitch.url.source.replace("<channelName>",twitchChannelName)),$("#twitchChat").attr("src",config.twitch.url.chat.replace("<channelName>",twitchChannelName))},$.setStreamInfo=function(){$("#twitchStatus").html(config.twitch.liveStatus.replace("<game>",twitchChannel.game)),$("#twitchTitle").html(twitchChannel.status)},$.loadStream=function(){$.when($.getJSON(config.twitch.apiUrl.streams.replace("<channelName>",twitchChannelName)+"?client_id="+config.twitch.applicationClientId)).then(function(t){$.setChannelInfo(),twitchStream=t.stream,null===twitchStream?$("#twitchStatus").html("Offline"):(twitchChannel=t.stream.channel,$.setStreamInfo())})},$.loadVideos=function(){$.when($.getJSON(config.twitch.apiUrl.channels.replace("<channelName>",twitchChannelName)+"/videos?broadcast_type=archive&limit="+config.twitch.limit+"&client_id="+config.twitch.applicationClientId)).then(function(t){var e=t.videos,n=null;$.each(e,function(t,e){n=$("#video-hidden-template").clone(),n.attr("id","video_"+e.broadcast_id),n.attr("href",e.url),n.find(".video_title").html($.reduceTitleTextSize(e.title)),n.find(".video_game").html(e.game),n.find(".stream_date").html($.convertDateToFrench(e.recorded_at)),n.find(".video_thumbnail").attr("src",e.preview),$("#twitchVideos").append(n)}),$("#video-hidden-template").hide()})},$.addTwitchStream=function(){$("#content").load("./components/stream.html",function(){$.when($.getUrlParam()).then(function(){void 0!==urlParam.stream&&(twitchChannelName=urlParam.stream,$("title").html(config.twitch.pageTitle.replace("<channelName>",twitchChannelName)),$.loadVideos(),$.loadStream())})})}});